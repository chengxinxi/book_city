"use strict";define(["jquery","common","base64"],function(i,e,o){var n,t,c=window.localStorage,l=c.getItem("fontSize")||16,a=c.getItem("chaper_id")||1,s=c.getItem("init")||1;function u(o){c.setItem("chaper_id",o),i.ajax({url:"/book/readjson?article="+o,dataType:"json",success:function(o){var n,t,c=o.jsonp;n=c,(t=document.createElement("script")).src=n,window.duokan_fiction_chapter=function(o){var n=JSON.parse(i.base64().decode(o));i(".box1").empty(),e(i(".box1_1").html(),n,".box1"),i(".font1").css("font-size",l+"px")},document.head.appendChild(t)}})}u(a),i.ajax({url:"/book/chapterlist",dataType:"json",success:function(o){t=o.item,e(i(".mulu_1").html(),t,".main1"),n=o.item.toc.length,i("#num_num").html(a+"/"+n),i(".main1").on("click","p",function(){a=i(this).attr("data-main"),console.log(a),u(a),i("#catalog").hide(),i("#num_num").html(a+"/"+n),c.setItem("init",s),e(i(".mulu_1").html(),t,".main1")})}}),i(".last_btn").on("click",function(){console.log(a),--a<=0&&(a=1),u(a),i("#num_num").html(a+"/"+n)}),i(".prev_btn").on("click",function(){console.log(a),u(++a),i("#num_num").html(a+"/"+n)}),i(".main").on("click",function(){i(".box2").hide()}),i(".box1").on("click",function(){i(".box2").show()});var m=!0;i("#font").click(function(){m?(i(".box_botton").show(),m=!1):(i(".box_botton").hide(),m=!0)}),i(".font_two span").click(function(){var o=i(this).css("background-color");i(".box1").css("background-color",o)}),i("#big_size").on("click",function(){console.log(l),l++,i(".font1").css("font-size",l),c.setItem("fontSize",l)}),i("#small_size").on("click",function(){l--,i(".font1").css("font-size",l),c.setItem("fontSize",l)});var r=!0;i("#evening").click(function(){r?(i(".box1").css("background-color","black"),i(".font1").css("color","#736357"),i("#evening>dd").html("白天"),r=!1):(i(".box1").css("background-color","#e9dfc7"),i(".font1").css("color","black"),i("#evening>dd").html("夜间"),r=!0)}),i("#back").on("click",function(){location.href="../../detail.html?active=352876"}),i(".mulu_btn").on("click",function(){i("#catalog").show()}),i("#return_back").on("click",function(){i("#catalog").hide()})});